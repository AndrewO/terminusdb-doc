<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><title>Query - TerminusDB Documentation</title><link rel="shortcut icon" href="/docs/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/docs/assets/css/just-the-docs.css"> <script type="text/javascript" src="/docs/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/docs/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Query | TerminusDB Documentation</title><meta name="generator" content="Jekyll v3.8.7" /><meta property="og:title" content="Query" /><meta property="og:locale" content="en_US" /><meta name="description" content="Documentation for TerminusDB" /><meta property="og:description" content="Documentation for TerminusDB" /><link rel="canonical" href="/docs/user-guide/query" /><meta property="og:url" content="/docs/user-guide/query" /><meta property="og:site_name" content="TerminusDB Documentation" /> <script type="application/ld+json"> {"description":"Documentation for TerminusDB","@type":"WebPage","url":"/docs/user-guide/query","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/docs/assets/images/horizontal_lockup_white.png"}},"headline":"Query","@context":"https://schema.org"}</script> <script src="https://cdn.usefathom.com/script.js" site="ETLDDMRO" defer></script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"><title>Link</title><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg><div class="page-wrap"><div class="side-bar"><div class="site-header"> <a href="/docs" class="site-title lh-tight"><div class="site-logo"></div></a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button></div><div class="navigation main-nav js-main-nav"><nav role="navigation" aria-label="Main navigation"><ul class="navigation-list"><li class="navigation-list-item"><a href="/docs/test/" class="navigation-list-link">Test</a><li class="navigation-list-item"><a href="/docs/" class="navigation-list-link">Home</a><li class="navigation-list-item"><a href="/docs/getting-started" class="navigation-list-link">Getting started</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/getting-started/quick-install/" class="navigation-list-link">Quick install with docker</a><li class="navigation-list-item "><a href="/docs/getting-started/other-install/" class="navigation-list-link">Other ways of installing TerminusDB</a><li class="navigation-list-item "><a href="/docs/getting-started/install-clients/" class="navigation-list-link">Installation of JS/ Python Clients</a><li class="navigation-list-item "><a href="/docs/getting-started/package-overview/" class="navigation-list-link">Package overview</a><li class="navigation-list-item "><a href="/docs/getting-started/start-tutorials" class="navigation-list-link">Getting started tutorials</a><li class="navigation-list-item "><a href="/docs/getting-started/essential-basic/" class="navigation-list-link">Essential basic functionality</a><li class="navigation-list-item "><a href="/docs/getting-started/intro-graph/" class="navigation-list-link">Intro to graph data modelling</a><li class="navigation-list-item "><a href="/docs/getting-started/comparison" class="navigation-list-link">Comparison with other tools</a><li class="navigation-list-item "><a href="/docs/getting-started/tutorials/" class="navigation-list-link">Tutorials</a></ul><li class="navigation-list-item active"><a href="/docs/user-guide" class="navigation-list-link">User guide</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/user-guide/revision-control" class="navigation-list-link">Revision Control</a><li class="navigation-list-item active"><a href="/docs/user-guide/query" class="navigation-list-link active">Query</a><ul class="navigation-list-grand-child-list"><li class="navigation-list-item "> <a href="/docs/user-guide/query/simple-query/" class="navigation-list-link">Simple Query</a><li class="navigation-list-item "> <a href="/docs/user-guide/query/inserting-data/" class="navigation-list-link">Inserting Data</a><li class="navigation-list-item "> <a href="/docs/user-guide/query/schema-query/" class="navigation-list-link">Schema Query</a><li class="navigation-list-item "> <a href="/docs/user-guide/query/resources/" class="navigation-list-link">Resources</a><li class="navigation-list-item "> <a href="/docs/user-guide/query/json-ld/" class="navigation-list-link">JSON-LD Query</a><li class="navigation-list-item "> <a href="/docs/user-guide/query/woql-lib/" class="navigation-list-link">WOQL Standard Library</a></ul><li class="navigation-list-item "><a href="/docs/user-guide/schema" class="navigation-list-link">Schema</a><li class="navigation-list-item "><a href="/docs/user-guide/console" class="navigation-list-link">TerminusDB Console</a><li class="navigation-list-item "><a href="/docs/user-guide/visualisation" class="navigation-list-link">Visualisation</a><li class="navigation-list-item "><a href="/docs/user-guide/api/" class="navigation-list-link">TerminusDB API</a><li class="navigation-list-item "><a href="/docs/user-guide/hub/" class="navigation-list-link">TerminusHub</a></ul><li class="navigation-list-item"><a href="/docs/api-reference/" class="navigation-list-link">API reference</a><li class="navigation-list-item"><a href="/docs/administration/" class="navigation-list-link">Administration</a><li class="navigation-list-item"><a href="/docs/developer-guide/" class="navigation-list-link">Developer guide</a><li class="navigation-list-item"><a href="/docs/release_notes/" class="navigation-list-link">Release notes</a><li class="navigation-list-item"><a href="/docs/research/" class="navigation-list-link">Research</a></ul></nav></div><footer class="site-footer"><p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p></footer></div><div class="main-content-wrap js-main-content" tabindex="0"><div class="main-content"><div class="page-header js-page-header"><div class="search"><div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search TerminusDB Documentation" aria-label="Search TerminusDB Documentation" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg></div><div class="js-search-results search-results-wrap"></div></div><ul class="list-style-none text-small aux-nav"><li class="d-inline-block my-0"><a href="https://github.com/terminusdb/terminusdb-server">TerminusDB on GitHub</a></ul></div><div class="page"><nav class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/user-guide">User guide</a><li class="breadcrumb-nav-list-item"><span>Query</span></ol></nav><div id="main-content" class="page-content" role="main"><h1 class="no_toc" id="query"> <a href="#query" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Query</h1><p>WOQL is the query language that works with TerminusDB. With its Prolog like logic, it is an elegant way to query data when you get the hang of it.</p><p>WOQLâ€™s primary syntax and interchange format is in JSON-LD. However, you can use WOQLjs and WOQLpy package which is included in their corresponding API client to construct WQOL queries. Query using WOQLjs is also available in TerminusDB console.</p><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#woqljs-and-woqlpy" id="markdown-toc-woqljs-and-woqlpy">WOQLjs and WOQLpy</a><li><a href="#querying-database" id="markdown-toc-querying-database">Querying Database</a><ol><li><a href="#querying-with-the-terminusdb-console" id="markdown-toc-querying-with-the-terminusdb-console">Querying with the TerminusDB Console</a><li><a href="#woqlpy---getting-result-as-a-pandas-dataframe" id="markdown-toc-woqlpy---getting-result-as-a-pandas-dataframe">WOQLpy - Getting Result as a Pandas DataFrame</a></ol></ol><hr /><h1 id="woqljs-and-woqlpy"> <a href="#woqljs-and-woqlpy" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> WOQLjs and WOQLpy</h1><p>JSON, through an elegant way to pass queries to the database, it is not the most coding friendly. WOQLjs and WOQLpy provide a tool to construct WOQL queries with JavaScript and Python. They are included in their corresponding API client to construct WQOL queries. Query using WOQLjs and WOQLpy is also available in TerminusDB console. For details about WOQLjs and WOQLpy calls, please see the documentation of the API clients:</p><p><a href="https://terminusdb.github.io/terminusdb-client/" class="btn btn-primary fs-5 mb-4 mb-md-0 mr-2">JavaScript Client</a><a href="https://terminusdb.github.io/terminusdb-client-python/" class="btn fs-5 mb-4 mb-md-0">Python Client</a></p><p>We assume most users will use WOQLjs or WOQLpy when constructing queries, hence most examples in this documentation will be in WOQLjs and/or WOQLpy.</p><hr /><h1 id="querying-database"> <a href="#querying-database" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Querying Database</h1><p>You can use both WOQLjs or WOQLpy to Query the data from the database. The following describe a few ways to do that and with the result presented in the console or as a Pandas DataFrame (WOQLpy)</p><h2 id="querying-with-the-terminusdb-console"> <a href="#querying-with-the-terminusdb-console" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Querying with the TerminusDB Console</h2><p>Queries can be done within the console, just enter your query into the box provided and click on the <code class="highlighter-rouge">Query</code> button at the top of the Query screen windows:</p><p><img src="../assets/images/console/query_at_console.png" alt="Query at Console" /></p><p>An example of Query in WOQLjs would be:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">WOQL</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="dl">"</span><span class="s2">v:Start</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">v:Start_Label</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">v:End</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">v:End_Label</span><span class="dl">"</span><span class="p">).</span><span class="nx">and</span><span class="p">(</span>
	<span class="nx">WOQL</span><span class="p">.</span><span class="nx">triple</span><span class="p">(</span><span class="dl">"</span><span class="s2">v:Journey</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">scm:Journey</span><span class="dl">"</span><span class="p">),</span>
	<span class="nx">WOQL</span><span class="p">.</span><span class="nx">triple</span><span class="p">(</span><span class="dl">"</span><span class="s2">v:Journey</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">start_station</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">v:Start</span><span class="dl">"</span><span class="p">),</span>
	<span class="nx">WOQL</span><span class="p">.</span><span class="nx">opt</span><span class="p">().</span><span class="nx">triple</span><span class="p">(</span><span class="dl">"</span><span class="s2">v:Start</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">v:Start_Label</span><span class="dl">"</span><span class="p">),</span>
	<span class="nx">WOQL</span><span class="p">.</span><span class="nx">triple</span><span class="p">(</span><span class="dl">"</span><span class="s2">v:Journey</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">end_station</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">v:End</span><span class="dl">"</span><span class="p">),</span>
	<span class="nx">WOQL</span><span class="p">.</span><span class="nx">opt</span><span class="p">().</span><span class="nx">triple</span><span class="p">(</span><span class="dl">"</span><span class="s2">v:End</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">v:End_Label</span><span class="dl">"</span><span class="p">),</span>
	<span class="nx">WOQL</span><span class="p">.</span><span class="nx">triple</span><span class="p">(</span><span class="dl">"</span><span class="s2">v:Journey</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">journey_bicycle</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">v:Bike</span><span class="dl">"</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div><p>Multiple <code class="highlighter-rouge">WOQL.triple</code>s are used to describe the relations of the objects in the graph. They are combined with a <code class="highlighter-rouge">WOQL.and</code>. <code class="highlighter-rouge">WOQL.quad</code> can be used in similar way if the graph of that triple needed to be specified.</p><p>Without the <code class="highlighter-rouge">WOQL.select</code>, all the variables, described with prefix <code class="highlighter-rouge">v:</code>, that matches with the relations will be returned as result. However, using <code class="highlighter-rouge">WOQL.select</code> can limit which variable are returned in the result. This can be used if some of the variables are intermediate links in the relations and not needed in the result. The result can be presented in wither table view or graph view.</p><p><code class="highlighter-rouge">WOQL.opt</code> is used if that conditional is optional. In this example, both <code class="highlighter-rouge">label</code>s for the Start Station and End Stations are not required. Using <code class="highlighter-rouge">opt</code> would avoid getting an error if any <code class="highlighter-rouge">label</code>s are missing.</p><h2 id="woqlpy---getting-result-as-a-pandas-dataframe"> <a href="#woqlpy---getting-result-as-a-pandas-dataframe" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> WOQLpy - Getting Result as a Pandas DataFrame</h2><p><strong>Only in python client for TerminusDB v1.0</strong></p><p>If <code class="highlighter-rouge">dataframe</code> option is chosen when installing <code class="highlighter-rouge">terminusdb-client-python</code> (<a href="">details here</a>) after executing the query with <code class="highlighter-rouge">query.execute(client)</code> a result binding is returned and it could be convert as a Pandas DataFrame by <code class="highlighter-rouge">woql.query_to_df(result)</code>. See <a href="">tutorial</a> as example.</p><hr /><hr><h2 class="text-delta">Table of contents</h2><ul><li> <a href="/docs/user-guide/query/simple-query/">Simple Query</a><li> <a href="/docs/user-guide/query/inserting-data/">Inserting Data</a><li> <a href="/docs/user-guide/query/schema-query/">Schema Query</a><li> <a href="/docs/user-guide/query/resources/">Resources</a><li> <a href="/docs/user-guide/query/json-ld/">JSON-LD Query</a><li> <a href="/docs/user-guide/query/woql-lib/">WOQL Standard Library</a></ul><hr><footer role="contentinfo"><p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2020 - TerminusDB | Distributed by an <a href="https://github.com/terminusdb/terminusdb-server/blob/master/LICENSE">GPL-3.0 license.</a></p></footer></div></div></div></div>
