<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><title>Advanced Topics - TerminusDB Documentation</title><link rel="shortcut icon" href="/docs/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/docs/assets/css/just-the-docs.css"> <script type="text/javascript" src="/docs/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/docs/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Advanced Topics | TerminusDB Documentation</title><meta name="generator" content="Jekyll v3.8.7" /><meta property="og:title" content="Advanced Topics" /><meta property="og:locale" content="en_US" /><meta name="description" content="Documentation for TerminusDB" /><meta property="og:description" content="Documentation for TerminusDB" /><link rel="canonical" href="/docs/user-guide/schema/advanced/" /><meta property="og:url" content="/docs/user-guide/schema/advanced/" /><meta property="og:site_name" content="TerminusDB Documentation" /> <script type="application/ld+json"> {"description":"Documentation for TerminusDB","@type":"WebPage","url":"/docs/user-guide/schema/advanced/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/docs/assets/images/horizontal_lockup_white.png"}},"headline":"Advanced Topics","@context":"https://schema.org"}</script> <script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script> <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt=""/></noscript> <script> var _paq = window._paq || []; /* tracker methods like "setCustomDimension" should be called before "trackPageView" */ _paq.push(['disableCookies']); _paq.push(['trackPageView']); _paq.push(['enableLinkTracking']); (function() { var u="https://terminusdb.matomo.cloud/"; _paq.push(['setTrackerUrl', u+'matomo.php']); _paq.push(['setSiteId', '1']); var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript'; g.async=true; g.defer=true; g.src='//cdn.matomo.cloud/terminusdb.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s); })(); </script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"><title>Link</title><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg><div class="page-wrap"><div class="side-bar"><div class="site-header"> <a href="/docs/" class="site-title lh-tight"><div class="site-logo"></div></a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button></div><div class="navigation main-nav js-main-nav"><nav role="navigation" aria-label="Main navigation"><ul class="navigation-list"><li class="navigation-list-item"><a href="/docs/" class="navigation-list-link">Home</a><li class="navigation-list-item"><a href="/docs/getting-started" class="navigation-list-link">Getting started</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/getting-started/quick-install/" class="navigation-list-link">Quick install with docker</a><li class="navigation-list-item "><a href="/docs/getting-started/other-install/" class="navigation-list-link">Other ways of installing TerminusDB</a><li class="navigation-list-item "><a href="/docs/getting-started/install-clients/" class="navigation-list-link">Installation of JS/ Python Clients</a><li class="navigation-list-item "><a href="/docs/getting-started/package-overview/" class="navigation-list-link">Package overview</a><li class="navigation-list-item "><a href="/docs/getting-started/start-tutorials" class="navigation-list-link">Getting started tutorials</a><li class="navigation-list-item "><a href="/docs/getting-started/essential-basic/" class="navigation-list-link">Essential basic functionality</a><li class="navigation-list-item "><a href="/docs/getting-started/intro-graph/" class="navigation-list-link">Intro to graph data modelling</a><li class="navigation-list-item "><a href="/docs/getting-started/comparison" class="navigation-list-link">Comparison with other tools</a><li class="navigation-list-item "><a href="/docs/getting-started/tutorials/" class="navigation-list-link">Tutorials</a></ul><li class="navigation-list-item active"><a href="/docs/user-guide" class="navigation-list-link">User guide</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/user-guide/revision-control" class="navigation-list-link">Revision Control</a><li class="navigation-list-item "><a href="/docs/user-guide/query" class="navigation-list-link">Query</a><li class="navigation-list-item active"><a href="/docs/user-guide/schema" class="navigation-list-link">Schema</a><ul class="navigation-list-grand-child-list"><li class="navigation-list-item "> <a href="/docs/user-guide/schema/classes/" class="navigation-list-link">Classes</a><li class="navigation-list-item "> <a href="/docs/user-guide/schema/properties/" class="navigation-list-link">Properties</a><li class="navigation-list-item "> <a href="/docs/user-guide/schema/datatypes/" class="navigation-list-link">Datatypes</a><li class="navigation-list-item "> <a href="/docs/user-guide/schema/ids/" class="navigation-list-link">IDs, IRIs, URLs and Prefixes</a><li class="navigation-list-item "> <a href="/docs/user-guide/schema/graphs/" class="navigation-list-link">Graphs</a><li class="navigation-list-item active"> <a href="/docs/user-guide/schema/advanced/" class="navigation-list-link active">Advanced Topics</a></ul><li class="navigation-list-item "><a href="/docs/user-guide/console" class="navigation-list-link">TerminusDB Console</a><li class="navigation-list-item "><a href="/docs/user-guide/visualisation" class="navigation-list-link">Visualisation</a><li class="navigation-list-item "><a href="/docs/user-guide/api/" class="navigation-list-link">TerminusDB API</a></ul><li class="navigation-list-item"><a href="/docs/api-reference/" class="navigation-list-link">API reference</a><li class="navigation-list-item"><a href="/docs/administration/" class="navigation-list-link">Administration</a><li class="navigation-list-item"><a href="/docs/developer-guide/" class="navigation-list-link">Developer guide</a><li class="navigation-list-item"><a href="/docs/release_notes/" class="navigation-list-link">Release notes</a></ul></nav></div><footer class="site-footer"><p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p></footer></div><div class="main-content-wrap js-main-content" tabindex="0"><div class="main-content"><div class="page-header js-page-header"><div class="search"><div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search TerminusDB Documentation" aria-label="Search TerminusDB Documentation" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg></div><div class="js-search-results search-results-wrap"></div></div><ul class="list-style-none text-small aux-nav"><li class="d-inline-block my-0"><a href="https://github.com/terminusdb/terminusdb-server">TerminusDB on GitHub</a></ul></div><div class="page"><nav class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/user-guide">User guide</a><li class="breadcrumb-nav-list-item"><a href="/docs/user-guide/schema">Schema</a><li class="breadcrumb-nav-list-item"><span>Advanced Topics</span></ol></nav><div id="main-content" class="page-content" role="main"><h1 class="no_toc" id="advanced-topics---owl-unleashed"> <a href="#advanced-topics---owl-unleashed" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Advanced Topics - OWL Unleashed</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#introduction" id="markdown-toc-introduction">Introduction</a><li><a href="#scoping" id="markdown-toc-scoping">Scoping</a><li><a href="#boxing-datatypes" id="markdown-toc-boxing-datatypes">Boxing Datatypes</a><li><a href="#open-and-closed-world-reasoning" id="markdown-toc-open-and-closed-world-reasoning">Open and Closed World Reasoning</a><ol><li><a href="#inference-graph" id="markdown-toc-inference-graph">Inference Graph</a></ol><li><a href="#freestyle-owl" id="markdown-toc-freestyle-owl">Freestyle OWL</a></ol><hr /><h2 id="introduction"> <a href="#introduction" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Introduction</h2><p>TerminusDB supports a large fragment of the OWL language. This enables a large number of complex constraints to be expressed in a wide variety of different ways. However, as OWL supports multiple inheritance, it is almost never necessary to use anything much more esoteric than subclassing to achieve a desired effect. This section demonstrates how we can solve some common data-modelling problems with TerminusDB.</p><h2 id="scoping"> <a href="#scoping" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Scoping</h2><p>When we construct knowledge graphs, consisting of relationships between things, we often want to scope the relationships, or the properties of the things, especially by time. In a more general sense, the relationships between things are often complex and can’t be represented by a simple property. In TerminusDB this is easy to achieve by creating classes to represent the common properties.</p><p>For example, if we wanted to model a situation where a person was a shareholder of a company for a certain period of time. We want our knowledge graph to contain a shareholder relationship between the person and the company, but it should be scoped by the time of the relationship.</p><p>This is simple to achieve by creating an abstract super-class called “EphermeralEntity”, making the shareholder relationship a subclass of this class along with the properties which point at the people involved in the relationships.</p><div class="code-example"><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">WOQL</span><span class="p">.</span><span class="nx">add_class</span><span class="p">(</span><span class="dl">"</span><span class="s2">EphemeralEntity</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">label</span><span class="p">(</span><span class="dl">"</span><span class="s2">Ephemeral Entity</span><span class="dl">"</span><span class="p">).</span><span class="nx">abstract</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="dl">"</span><span class="s2">from</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">xsd:dateTime</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">label</span><span class="p">(</span><span class="dl">"</span><span class="s2">From</span><span class="dl">"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="dl">"</span><span class="s2">to</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">xsd:dateTime</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">label</span><span class="p">(</span><span class="dl">"</span><span class="s2">To</span><span class="dl">"</span><span class="p">)</span>

<span class="nx">WOQL</span><span class="p">.</span><span class="nx">add_class</span><span class="p">(</span><span class="dl">"</span><span class="s2">Shareholding</span><span class="dl">"</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="dl">"</span><span class="s2">EphemeralEntity</span><span class="dl">"</span><span class="p">)</span>

</code></pre></div></div></div><p>In TerminusDB there is no fundamental distiction between things and relationships - relationships are things that can be interepreted as relationships by virtue of having properties that point at other things.</p><h2 id="boxing-datatypes"> <a href="#boxing-datatypes" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Boxing Datatypes</h2><p>In RDF it is not possible to address triples with literal values directly. Therefore, if we want to add scopings or other annotations to a datatype property, we can’t do so directly. However, it is straightforward to create box classes to wrap the datatype properties in a simple object, with a regular naming convention.</p><p>Terminus WOQL contains some functions to support this situation.</p><div class="code-example"><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">boxClasses</span><span class="p">(</span><span class="nx">prefix</span><span class="p">,</span> <span class="nx">classes</span><span class="p">,</span> <span class="nx">except</span><span class="p">,</span> <span class="nx">graph</span><span class="p">)</span>
<span class="nx">loadXDDBoxes</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">graph</span><span class="p">,</span> <span class="nx">prefix</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">loadXSDBoxes</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">graph</span><span class="p">,</span> <span class="nx">prefix</span><span class="p">)</span>
</code></pre></div></div></div><h2 id="open-and-closed-world-reasoning"> <a href="#open-and-closed-world-reasoning" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Open and Closed World Reasoning</h2><p>Terminus supports both open and closed world reasoning. Schema graphs use closed world reasoning, but inference graphs use open world reasoning and allow the expression of inference rules. These rules are evaluated dynamically at query time rather than being materialised.</p><h3 id="inference-graph"> <a href="#inference-graph" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Inference Graph</h3><p>The master terminus database makes use of an inference graph to describe the concept whereby authority should commute over resource inclusion (i.e. if I have authority for a thing, I have authority for the things that are included within that thing).</p><div class="code-example"><pre><code class="language-ttl">
terminus:authority_scope
  owl:propertyChainAxiom ( terminus:authority_scope terminus:resource_includes ) .

</code></pre></div><h2 id="freestyle-owl"> <a href="#freestyle-owl" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Freestyle OWL</h2><p>OWL is an almost infinitely flexible language. This document just provides a taste of the complex configurations that can be achieved by defining OWL schema and inference rules. TerminusDB supports a large subset of OWL in both inference and schema modes. The diagram below provies a snapshot of the OWL predicates that we currently support. It should be noted that all of OWL can be used in schemata and inference graphs, but only this subset will be correctly reasoned over. In some cases, the reason that we do not support a predicate is because, in practice, the way that the predicate is used does not correspond with it’s semantic definition (owl:SameAs) in other cases, it is because we have never had the need to use that specific formulation. It is normally possible to adequately capture a situation using a much smaller subset of the language.</p><hr /><p><img src="https://terminusdb.com/docs/img/owl-support.png" /></p><hr><footer role="contentinfo"><p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2020 - TerminusDB | Distributed by an <a href="https://github.com/terminusdb/terminusdb-server/blob/master/LICENSE">GPL-3.0 license.</a></p></footer></div></div></div></div>
