<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><title>Full Architecture - TerminusDB Documentation</title><link rel="shortcut icon" href="/docs/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/docs/assets/css/just-the-docs.css"> <script type="text/javascript" src="/docs/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/docs/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Full Architecture | TerminusDB Documentation</title><meta name="generator" content="Jekyll v3.8.7" /><meta property="og:title" content="Full Architecture" /><meta property="og:locale" content="en_US" /><meta name="description" content="Documentation for TerminusDB" /><meta property="og:description" content="Documentation for TerminusDB" /><link rel="canonical" href="/docs/user-guide/revision-control/architecture/" /><meta property="og:url" content="/docs/user-guide/revision-control/architecture/" /><meta property="og:site_name" content="TerminusDB Documentation" /> <script type="application/ld+json"> {"description":"Documentation for TerminusDB","@type":"WebPage","url":"/docs/user-guide/revision-control/architecture/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/docs/assets/images/horizontal_lockup_white.png"}},"headline":"Full Architecture","@context":"https://schema.org"}</script> <script src="https://cdn.usefathom.com/script.js" site="ETLDDMRO" defer></script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"><title>Link</title><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg><div class="page-wrap"><div class="side-bar"><div class="site-header"> <a href="/docs" class="site-title lh-tight"><div class="site-logo"></div></a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button></div><div class="navigation main-nav js-main-nav"><nav role="navigation" aria-label="Main navigation"><ul class="navigation-list"><li class="navigation-list-item"><a href="/docs/test/" class="navigation-list-link">test</a><li class="navigation-list-item"><a href="/docs/" class="navigation-list-link">Home</a><li class="navigation-list-item"><a href="/docs/getting-started" class="navigation-list-link">Getting started</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/docs/getting-started/quick-install/" class="navigation-list-link">Quick install with docker</a><li class="navigation-list-item "><a href="/docs/getting-started/other-install/" class="navigation-list-link">Other ways of installing TerminusDB</a><li class="navigation-list-item "><a href="/docs/getting-started/install-clients/" class="navigation-list-link">Installation of JS/ Python Clients</a><li class="navigation-list-item "><a href="/docs/getting-started/package-overview/" class="navigation-list-link">Package overview</a><li class="navigation-list-item "><a href="/docs/getting-started/start-tutorials" class="navigation-list-link">Getting started tutorials</a><li class="navigation-list-item "><a href="/docs/getting-started/essential-basic/" class="navigation-list-link">Essential basic functionality</a><li class="navigation-list-item "><a href="/docs/getting-started/intro-graph/" class="navigation-list-link">Intro to graph data modelling</a><li class="navigation-list-item "><a href="/docs/getting-started/comparison" class="navigation-list-link">Comparison with other tools</a><li class="navigation-list-item "><a href="/docs/getting-started/tutorials/" class="navigation-list-link">Tutorials</a></ul><li class="navigation-list-item active"><a href="/docs/user-guide" class="navigation-list-link">User guide</a><ul class="navigation-list-child-list "><li class="navigation-list-item active"><a href="/docs/user-guide/revision-control" class="navigation-list-link">Revision Control</a><ul class="navigation-list-grand-child-list"><li class="navigation-list-item "> <a href="/docs/user-guide/revision-control/commit-graph/" class="navigation-list-link">The Commit Graph</a><li class="navigation-list-item "> <a href="/docs/user-guide/revision-control/time-travel/" class="navigation-list-link">Time Travel</a><li class="navigation-list-item "> <a href="/docs/user-guide/revision-control/branching/" class="navigation-list-link">Branching</a><li class="navigation-list-item "> <a href="/docs/user-guide/revision-control/merging/" class="navigation-list-link">Merging</a><li class="navigation-list-item "> <a href="/docs/user-guide/revision-control/meta-graph/" class="navigation-list-link">The Meta Graph</a><li class="navigation-list-item "> <a href="/docs/user-guide/revision-control/cloning/" class="navigation-list-link">Cloning Databases</a><li class="navigation-list-item "> <a href="/docs/user-guide/revision-control/pull-push/" class="navigation-list-link">Pull and Push</a><li class="navigation-list-item active"> <a href="/docs/user-guide/revision-control/architecture/" class="navigation-list-link active">Full Architecture</a></ul><li class="navigation-list-item "><a href="/docs/user-guide/query" class="navigation-list-link">Query</a><li class="navigation-list-item "><a href="/docs/user-guide/schema" class="navigation-list-link">Schema</a><li class="navigation-list-item "><a href="/docs/user-guide/console" class="navigation-list-link">TerminusDB Console</a><li class="navigation-list-item "><a href="/docs/user-guide/visualisation" class="navigation-list-link">Visualisation</a><li class="navigation-list-item "><a href="/docs/user-guide/api/" class="navigation-list-link">TerminusDB API</a><li class="navigation-list-item "><a href="/docs/user-guide/hub/" class="navigation-list-link">TerminusHub</a></ul><li class="navigation-list-item"><a href="/docs/api-reference/" class="navigation-list-link">API reference</a><li class="navigation-list-item"><a href="/docs/administration/" class="navigation-list-link">Administration</a><li class="navigation-list-item"><a href="/docs/developer-guide/" class="navigation-list-link">Developer guide</a><li class="navigation-list-item"><a href="/docs/release_notes/" class="navigation-list-link">Release notes</a><li class="navigation-list-item"><a href="/docs/research/" class="navigation-list-link">Research</a></ul></nav></div><footer class="site-footer"><p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p></footer></div><div class="main-content-wrap js-main-content" tabindex="0"><div class="main-content"><div class="page-header js-page-header"><div class="search"><div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search TerminusDB Documentation" aria-label="Search TerminusDB Documentation" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg></div><div class="js-search-results search-results-wrap"></div></div><ul class="list-style-none text-small aux-nav"><li class="d-inline-block my-0"><a href="https://github.com/terminusdb/terminusdb-server">TerminusDB on GitHub</a></ul></div><div class="page"><nav class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/user-guide">User guide</a><li class="breadcrumb-nav-list-item"><a href="/docs/user-guide/revision-control">Revision Control</a><li class="breadcrumb-nav-list-item"><span>Full Architecture</span></ol></nav><div id="main-content" class="page-content" role="main"><h1 class="no_toc" id="full-architecture"> <a href="#full-architecture" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Full Architecture</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#architecture" id="markdown-toc-architecture">Architecture</a></ol><hr /><p>TerminusDB is architected as a revision controlled database from the ground up. In TerminusDB, revision control is based on a model quite similar to the one used in git. However, where git uses <em>lines of code</em> added or deleted, TerminusDB uses <em>triples</em> added or deleted.</p><p><em>picture of delta here</em></p><p>Each collection of additions and deletions is called a <em>delta</em> or <em>delta layer</em>. These <em>deltas</em> are then appended together in a chain (or tree) to form what is the current state of our <em>graph</em>. This approach of always giving the changed information as a <em>delta</em> makes TerminusDB an <em>append only</em> database.</p><p>When we query for data, we start at the top of the stack, and search downwards looking for triples added, which have not been deleted.</p><p>Each graph represents <em>sets</em> of triples. That is, a triple is either there, or it is not. There is no notion of it being in the graph multiple times. This simplifies our model of changes, merges and updates.</p><h2 id="architecture"> <a href="#architecture" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Architecture</h2><p><img src="/docs/assets/images/architecture.png" alt="" /></p><p>TerminusDB is structured as a hierarchy of graphs. Each level of the hierarchy is itself a graph which can be queried and which stores information about the graphs below it.</p><p>At the heighest level is the TerminusCore graph. This stores the records concerning all users and databases in the system.</p><p>For each database there is corresponding “_meta” graph which stores information about which repositories are present for a datbase. This includes <em>at least</em> the “local” repository. However it may also contain any number of remote repositories as well. These remotes represent other TerminuDB installations, and can be used to push or pull changes and collaborate with others.</p><p>Each of these repositories consists of a “_commit” graph which stores information about the branchs that we have, commit chains, and the graphs associated with each commit.</p><p>Finally commits point to the instance and schema graphs associated with a commit. This is important since schema and instance graphs have to move in lock-step to maintain consistency.</p><p>We will look more closely at the commit graph and then move on to the various operations which TerminusDB can perform.</p><hr><footer role="contentinfo"><p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2020 - TerminusDB | Distributed by an <a href="https://github.com/terminusdb/terminusdb-server/blob/master/LICENSE">GPL-3.0 license.</a></p></footer></div></div></div></div>
